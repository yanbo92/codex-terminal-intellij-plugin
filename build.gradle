plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.17.3'
}

group = 'com.yanbo92.codex'
version = '1.0.3'

repositories { mavenCentral() }

dependencies {
    // No external dependencies needed - plugin only uses IntelliJ Platform APIs
}

intellij {
    version = '2023.2'
    type = 'IC'
    plugins = ['org.jetbrains.plugins.terminal']
}

tasks.patchPluginXml {
    sinceBuild = '232'
    untilBuild = ''
}

tasks.buildSearchableOptions { enabled = false }

// ğŸ”’ å…ˆç»Ÿä¸€ç¦ç”¨ç­¾åå’Œä¸‹è½½ ZIP Signer
tasks.named('signPlugin').configure { enabled = false }
tasks.named('downloadZipSigner').configure { enabled = false }

publishPlugin {
    token = System.getenv('PUBLISH_TOKEN')
}

java {
    toolchain { languageVersion = JavaLanguageVersion.of(17) }
}
tasks.withType(JavaCompile).configureEach {
    options.release = 17
}
